---

---

<input id="dark-mode-toggle" type="checkbox" />
<style>
  * {
    display: none;
  }
</style>

<script>
  document
    .getElementById("dark-mode-toggle")
    ?.addEventListener("change", (event) => {
      // @ts-expect-error Property 'checked' does not exist on type 'EventTarget'. ts(2339)
      if (event.target?.checked) {
        window.localStorage.setItem("preferred-color-scheme", "dark");
      } else {
        window.localStorage.setItem("preferred-color-scheme", "light");
      }
    });
</script>

<script is:inline>
  let storedPreference = window.localStorage.getItem("preferred-color-scheme");
  let prefersDarkMode = window.matchMedia(
    "(prefers-color-scheme: dark)",
  ).matches;

  if (
    storedPreference === "dark" ||
    (storedPreference === null && prefersDarkMode)
  ) {
    document.getElementById("dark-mode-toggle").checked = prefersDarkMode;
  }
</script>
